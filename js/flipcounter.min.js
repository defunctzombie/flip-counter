/**
 * Apple-Style Flip Counter
 * ------------------------
 *
 * Copyright (c) 2010 Chris Nanney
 * http://cnanney.com/journal/code/apple-style-counter-revisited/
 * http://cnanney.com/journal/code/apple-style-counter/
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 */
var flipCounter=function(w,H){function r(){j=c.value.toString();c.value+=c.inc;i=c.value.toString();n(j,i);if(c.auto===true)k=setTimeout(r,c.pace)}function x(a,e,b){var d=c.value,g=typeof e=="undefined"?false:e,f=typeof b=="undefined"?1:b;g===true&&f--;if(d!=a){j=c.value.toString();c.auto=true;if(d+c.inc<=a&&f!=0)d+=c.inc;else d=a;c.value=d;i=c.value.toString();n(j,i);k=setTimeout(function(){x(a,g,f)},c.pace)}else c.auto=false}function n(a,e){s=y(a);t=y(e);if(e.length>a.length)for(var b=e.length-
a.length;b>0;){var d=t[e.length-b],g=Number(e.length-b+1)-1;g%3==0&&jQuery(h).prepend('<ul class="cd"><li class="s"></li></ul>');jQuery(h).prepend('<ul class="cd" id="d'+g+'"><li class="t"></li><li class="b"></li></ul>');jQuery(h+" #d"+g+" li.t").css({"background-position":"0 -"+d*o+"px"});jQuery(h+" #d"+g+" li.b").css({"background-position":"0 -"+d*m+"px"});b--}if(e.length<a.length)for(b=a.length-e.length;b>0;){jQuery(h+" #d"+(a.length-b)).remove();d=jQuery(h+" li").first();d.hasClass("s")&&d.parent("ul").remove();
b--}for(b=0;b<s.length;b++)t[b]!=s[b]&&I(b,s[b],t[b])}function I(a,e,b){var d;if(c.auto===true&&c.pace<=300)switch(a){case 0:d=c.pace/6;break;case 1:d=c.pace/5;break;case 2:d=c.pace/4;break;case 3:d=c.pace/3;break;default:d=c.pace/2}else d=80;d=d>80?80:d;jQuery(h+" #d"+a+" li.t").delay(d).animate({"background-position":"-"+p+"px -"+e*o+"px"},0).delay(d).animate({"background-position":p*-2+"px -"+e*o+"px"},0).delay(d).animate({"background-position":"0 -"+b*o+"px"},0,function(){jQuery(h+" #d"+a+" li.b").animate({"background-position":"-"+
p+"px -"+e*m+"px"},0).delay(d).animate({"background-position":p*-2+"px -"+b*m+"px"},0).delay(d).animate({"background-position":p*-3+"px -"+b*m+"px"},0).delay(d).animate({"background-position":"0 -"+b*m+"px"},0)})}function y(a){for(var e=[],b=0;b<a.length;b++){E=a.length-(b+1);F=a.length-b;e[b]=a.substring(E,F)}return e}function G(a,e,b,d,g){var f={result:true};f.cond1=a/e>=1?true:false;f.cond2=e*b<=a?true:false;f.cond3=Math.abs(e*b-a)<=5?true:false;f.cond4=Math.abs(e*d-g)<=100?true:false;f.cond5=
e*d<=g?true:false;f.str="Condition Checks:\n";for(a=1;a<=5;a++){f.str+=a+": ";if(f["cond"+a]===false){f.str+="FAIL";f.result=false}else f.str+="PASS";f.str+=a<5?", ":""}return f}function l(a){return!isNaN(parseFloat(a))&&isFinite(a)}function z(){clearTimeout(k);k=null}var u={value:0,inc:1,pace:1E3,auto:true,debug:false},c=H||{},h=w&&w!=""?"#"+w:"#counter",q;for(q in u)c[q]=q in c?c[q]:u[q];var o=39,m=64,p=53,s=[],t=[],E,F,j,i,k=null;this.setValue=function(a){if(l(a)){j=c.value.toString();i=a.toString();
c.value=a;n(j,i)}return this};this.setIncrement=function(a){c.inc=l(a)?a:u.inc;return this};this.setPace=function(a){c.pace=l(a)?a:u.pace;return this};this.setAuto=function(a){if(a&&!c.atuo){c.auto=true;r()}if(!a&&c.auto){k&&z();c.auto=false}return this};this.step=function(){c.auto||r();return this};this.add=function(a){if(l(a)){j=c.value.toString();c.value+=a;i=c.value.toString();n(j,i)}return this};this.subtract=function(a){if(l(a)){j=c.value.toString();c.value-=a;if(c.value>=0)i=c.value.toString();
else{i="0";c.value=0}n(j,i)}return this};this.incrementTo=function(a,e,b){k&&z();if(typeof e!="undefined"){e=l(e)?e*1E3:1E4;b=typeof b!="undefined"&&l(b)?b:c.pace;var d=typeof a!="undefined"&&l(a)?a-c.value:0,g,f,A,B,C,D=0,v={pace:0,inc:0};b=e/d>b?Math.round(e/d/10)*10:b;g=Math.floor(e/b);f=Math.round(d/g);A=Math.abs(d-g*f)+Math.abs(g*b-e);C=G(d,g,f,b,e);if(d>0){for(;C.result===false&&D<100;){b+=10;g=Math.floor(e/b);f=Math.round(d/g);B=Math.abs(d-g*f)+Math.abs(g*b-e);C=G(d,g,f,b,e);if(B<A){A=B;v.pace=
b;v.inc=f}D++}if(D==100){c.inc=v.inc;c.pace=v.pace}else{c.inc=f;c.pace=b}x(a,true,g)}}else x(a)};this.getValue=function(){return c.value};this.stop=function(){k&&z();return this};(function(a){for(var e=a.toString().length,b=1,d=0;d<e;d++){jQuery(h).prepend('<ul class="cd" id="d'+d+'"><li class="t"></li><li class="b"></li></ul>');b!=e&&b%3==0&&jQuery(h).prepend('<ul class="cd"><li class="s"></li></ul>');b++}a=y(a.toString());for(d=0;d<e;d++){jQuery(h+" #d"+d+" li.t").css({"background-position":"0 -"+
a[d]*o+"px"});jQuery(h+" #d"+d+" li.b").css({"background-position":"0 -"+a[d]*m+"px"})}if(c.auto===true)k=setTimeout(r,c.pace)})(c.value)};