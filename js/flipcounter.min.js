/**
 * Apple-Style Flip Counter
 * ------------------------
 *
 * Copyright (c) 2010 Chris Nanney
 * http://cnanney.com/journal/code/apple-style-counter-revisited/
 * http://cnanney.com/journal/code/apple-style-counter/
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 *
 * Version: 1.0
 * Released: November 15, 2010
 */

var flipCounter=function(u,y){function n(){h=b.value.toString();b.value+=b.inc;g=b.value.toString();o(h,g);if(b.auto===true)p=setTimeout(n,b.pace)}function o(a,e){q=v(a);r=v(e);if(e.length>a.length)for(var d=e.length-a.length;d>0;){var c=r[e.length-d],s=Number(e.length-d+1)-1;s%3==0&&$(f).prepend('<ul class="cd"><li class="s"></li></ul>');$(f).prepend('<ul class="cd" id="d'+s+'"><li class="t"></li><li class="b"></li></ul>');$(f+" #d"+s+" li.t").css({"background-position":"0 -"+c*j+"px"});$(f+" #d"+
s+" li.b").css({"background-position":"0 -"+c*i+"px"});d--}if(e.length<a.length)for(d=a.length-e.length;d>0;){c=a.length-d;console.log("tried to remove digit: "+c);$(f+" #d"+c).remove();c=$(f+" li").first();c.hasClass("s")&&c.parent("ul").remove();d--}for(d=0;d<q.length;d++)r[d]!=q[d]&&z(d,q[d],r[d])}function z(a,e,d){var c;if(b.auto===true&&b.pace<=300)switch(a){case 0:c=b.pace/6;break;case 1:c=b.pace/5;break;case 2:c=b.pace/4;break;case 3:c=b.pace/3;break;default:c=b.pace/2}else c=80;c=c>80?80:
c;$(f+" #d"+a+" li.t").delay(c).animate({"background-position":"-"+k+"px -"+e*j+"px"},0).delay(c).animate({"background-position":k*-2+"px -"+e*j+"px"},0).delay(c).animate({"background-position":"0 -"+d*j+"px"},0,function(){$(f+" #d"+a+" li.b").animate({"background-position":"-"+k+"px -"+e*i+"px"},0).delay(c).animate({"background-position":k*-2+"px -"+d*i+"px"},0).delay(c).animate({"background-position":k*-3+"px -"+d*i+"px"},0).delay(c).animate({"background-position":"0 -"+d*i+"px"},0)})}function v(a){for(var e=
[],d=0;d<a.length;d++){w=a.length-(d+1);x=a.length-d;e[d]=a.substring(w,x)}return e}function l(a){return!isNaN(parseFloat(a))&&isFinite(a)}var t={value:0,inc:1,pace:1E3,auto:true},b=y||{},f=u&&u!=""?"#"+u:"#counter",m;for(m in t)b[m]=m in b?b[m]:t[m];var j=39,i=64,k=53,q=[],r=[],w,x,h,g,p=null;this.setValue=function(a){if(l(a)){h=b.value.toString();g=a.toString();b.value=a;o(h,g)}return this};this.setIncrement=function(a){b.inc=l(a)?a:t.inc;return this};this.setPace=function(a){b.pace=l(a)?a:t.pace;
return this};this.setAuto=function(a){if(a&&!b.atuo){b.auto=true;n()}if(!a&&b.auto){p&&clearTimeout(p);b.auto=false}return this};this.step=function(){b.auto||n();return this};this.add=function(a){if(l(a)){h=b.value.toString();b.value+=a;g=b.value.toString();o(h,g)}return this};this.subtract=function(a){if(l(a)){h=b.value.toString();b.value-=a;if(b.value>=0)g=b.value.toString();else{g="0";b.value=0}o(h,g)}return this};(function(a){for(var e=a.toString().length,d=1,c=0;c<e;c++){$(f).prepend('<ul class="cd" id="d'+
c+'"><li class="t"></li><li class="b"></li></ul>');d!=e&&d%3==0&&$(f).prepend('<ul class="cd"><li class="s"></li></ul>');d++}a=v(a.toString());for(c=0;c<e;c++){$(f+" #d"+c+" li.t").css({"background-position":"0 -"+a[c]*j+"px"});$(f+" #d"+c+" li.b").css({"background-position":"0 -"+a[c]*i+"px"})}if(b.auto===true)p=setTimeout(n,b.pace)})(b.value)};